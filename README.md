# CIKM - 18

Steps to generate author embeddings:

1. Create ACA and APA matrices:
```
$ python3.6 matrices.py -h
usage: matrices.py [-h] [-s SIMILARITY] [-w WEIGHTED]

Generate APA and ACA matrices using given similarity measure.

optional arguments:
  -h, --help            show this help message and exit
  -s SIMILARITY, --similarity SIMILARITY
                        Similarity measure between author nodes. Choose among following: 
                        cn - Common neighbour 
                        jc - Jaccard Coefficient 
                        aa - Adamic-Adar 
                        ra - Resource Allocation. (default: cn)
  -w WEIGHTED, --weighted WEIGHTED
                        Whether to have weighted similarity scores (True/False). (default: False)
```

2. Generate author contexts using ACA and APA matrices:
```
$ python3.6 context.py -h
usage: context.py [-h] [-c COMBINE] [-s SIMILARITY] [-w WEIGHTED] [-a ALPHA]

Generate contexts from ACA and/or APA matrices.

optional arguments:
  -h, --help            show this help message and exit
  -c COMBINE, --combine COMBINE
                        Combination of similarity scores from APA and ACA matrices. Choose among aca,apa,sum,alpha. (default: aca)
  -s SIMILARITY, --similarity SIMILARITY
                        Similarity measure between author nodes. Choose among cn,jc,aa,ra. (default: cn)
  -w WEIGHTED, --weighted WEIGHTED
                        Whether to have weighted similarity scores (True/False). (default: False)
  -a ALPHA, --alpha ALPHA
                        Alpha value used in conjunction with alpha combination rule. 
                        similarity = alpha * ACA + (1 - alpha) * APA 
                        Value between 0 and 1. (default: 0.5)
```

3. Generate author embeddings using contexts.
```
$ python3.6 embedding.py -h
usage: embedding.py [-h] -f CONTEXT_FILE [-m MODEL] [-d DIMENSION]
                    [-w WINDOW_SIZE] [-t NUM_THREADS]

Generate author embeddings.

optional arguments:
  -h, --help            show this help message and exit
  -f CONTEXT_FILE, --context_file CONTEXT_FILE
                        Context file(REQUIRED, default: None)
  -m MODEL, --model MODEL
                        Model used for generating vectors. 
                        0 - CBOW, 1 - skip-gram (default: 1)
  -d DIMENSION, --dimension DIMENSION
                        Dimension of vectors generated by Word2Vec(default: 100)
  -w WINDOW_SIZE, --window WINDOW_SIZE
                        Window size used for generating contexts(default: 5)
  -t NUM_THREADS, --threads NUM_THREADS
                        Number of threads used for generating contexts(default: 44)
```

4. Compute cosine similarities of authors in test data.
```
$ python3.6 compute_cs.py -h
usage: compute_cs.py [-h] -f MODEL_FILE [-t NUM_THREADS]

Compute cosine similarities of edges in test data. File as saved in the folder
"test_scores".

optional arguments:
  -h, --help            show this help message and exit
  -f MODEL_FILE, --model_file MODEL_FILE
                        File containing author embeddings(REQUIRED)
  -t NUM_THREADS, --num_threads NUM_THREADS
                        Number of threads used for parallelization(default:
                        44)
```

## Example

1. Compute unweighted APA and ACA matrices using resource allocation as simlarity.
```
$ python3.6 matrices.py -s ra -w False
```

2. Generate contexts using 'sum' combination strategy.
``` 
$ python3.6 context.py -c sum -s ra -w False
```

3. Generate vector embeddings for authors using the contexts generating in previous step.
```
$ python3.6 embedding.py -f contexts/context_sum_ra_False.txt
```

4. Compute cosine similarities of author nodes in test data.
```
$ python3.6 compute_cs.py -f embeddings/model_sum_ra_False_1_100_5.bin
```

Test data with cosine similarity scores will be saved in a folder named: 'test_scores/scores_sum_ra_False_1_100_5'.
